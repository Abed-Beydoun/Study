# Authorization and Authentication

## Table of Contents

- [Authorization and Authentication](#authorization-and-authentication)
  - [Table of Contents](#table-of-contents)
  - [Introduction](#introduction)
  - [Authorization](#authorization)
    - [Role Based Access Control](#role-based-access-control)
    - [Attribute Based Access Control](#attribute-based-access-control)
    - [Access Control List](#access-control-list)
    - [Capabilities](#capabilities)
  - [Authentication](#authentication)
    - [Basic Authentication](#basic-authentication)
    - [Digest Authentication](#digest-authentication)
    - [Token Authentication](#token-authentication)
- [JWT Json Web Token](#jwt)
  - [Introduction](#introduction-1)
  - [Structure](#structure)
  - [Working](#working)
  - [Advantages](#advantages)
  - [Disadvantages](#disadvantages)
  - [Use Cases](#use-cases)

## Introduction

Authentication and authorization are two important security concepts that are used to protect the resources of an application. Authentication is the process of verifying the identity of a user, while authorization is the process of determining whether a user has the necessary permissions to access a resource.

## Authorization

Authorization is the process of determining whether a user has the necessary permissions to access a resource. There are several different authorization models that can be used to control access to resources, including:

### Role Based Access Control

Role Based Access Control (RBAC) is a model in which access to resources is determined by the roles that a user has been assigned. Users are assigned to roles, and roles are assigned permissions to access resources. When a user logs in, the system checks the roles that the user has been assigned and determines whether the user has the necessary permissions to access the resource.

### Attribute Based Access Control

Attribute Based Access Control (ABAC) is a model in which access to resources is determined by the attributes of the user and the resource. Users are assigned attributes, and resources are assigned attributes. When a user tries to access a resource, the system checks the attributes of the user and the resource and determines whether the user has the necessary permissions to access the resource.

### Access Control List

An Access Control List (ACL) is a list of permissions that are associated with a resource. Each permission in the list specifies which users or roles are allowed to access the resource and what actions they are allowed to perform.

```json
{
  "resource": "/api/v1/users",
  "permissions": [
    {
      "role": "admin",
      "actions": ["read", "write", "delete"]
    },
    {
      "role": "user",
      "actions": ["read"]
    }
  ]
}
```

### Capabilities

Capabilities are a model in which access to resources is determined by the possession of a token that grants access to the resource. When a user logs in, the system generates a token that grants access to the resource. The user must present the token to access the resource.

## Authentication

Authentication is the process of verifying the identity of a user. There are several different authentication mechanisms that can be used to verify the identity of a user, including:

### Basic Authentication

Basic Authentication is a simple authentication mechanism in which the user provides a username and password to access a resource. The username and password are sent in the HTTP headers of the request.

### Digest Authentication

Digest Authentication is a more secure authentication mechanism than Basic Authentication. In Digest Authentication, the user provides a username and password to access a resource, but the password is hashed before it is sent over the network.

### Token Authentication

Token Authentication is a mechanism in which the user provides a token to access a resource. The token is generated by the system when the user logs in and is sent in the HTTP headers of the request.

## JWT

### Introduction

JSON Web Token (JWT) is an open standard (RFC 7519) that defines a compact and self-contained way for securely transmitting information between parties as a JSON object. This information can be verified and trusted because it is digitally signed. JWTs can be signed using a secret (with the HMAC algorithm) or a public/private key pair using RSA or ECDSA.

```bash
eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c
```

### Structure

A JWT is composed of three parts: a header, a payload, and a signature.

- **Header**: The header typically consists of two parts: the type of the token, which is JWT, and the signing algorithm being used, such as HMAC SHA256 or RSA.
- **Payload**: The second part of the token is the payload, which contains the claims. Claims are statements about an entity (typically, the user) and additional data. There are three types of claims: registered, public, and private claims.
- **Signature**: To create the signature part you have to take the encoded header, the encoded payload, a secret, the algorithm specified in the header, and sign that.

### Working

The JWT is sent in the HTTP headers of the request. The server verifies the signature of the JWT to ensure that it has not been tampered with. If the signature is valid, the server extracts the payload of the JWT and uses the information in the payload to authenticate the user.

```bash
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c
```

### Advantages

- **Compact**: JWTs are compact, which makes them easy to transmit over the network.
- **Self-contained**: JWTs contain all the information needed to verify the token, which makes them self-contained.
- **Secure**: JWTs can be signed and encrypted to ensure that they have not been tampered with.

### Disadvantages

- **Stateless**: JWTs are stateless, which means that the server does not need to store the token in a database. This can be a disadvantage if the token needs to be revoked.
- **Size**: JWTs can be large if they contain a lot of information, which can increase the size of the request.

### Use Cases

- **Authentication**: JWTs are commonly used for authentication. When a user logs in, the server generates a JWT and sends it to the client. The client sends the JWT in the HTTP headers of subsequent requests to authenticate the user.
- **Authorization**: JWTs can also be used for authorization. The server can include information in the payload of the JWT that specifies the permissions of the user.
